= drush Cookbook

Installs the {Drush CLI tool}[http://www.drush.org/] for Drupal, either via PEAR package or directly from source via Git.

If you use Drush 4, this cookbook includes a recipe to install {drush_make}[https://drupal.org/project/drush_make] (via <tt>drush pm-download</tt>).

== Requirements

=== Chef

Tested on Chef 11.6.2

=== Cookbooks

* {Opscode's php cookbook}[http://community.opscode.com/cookbooks/php], version 0.99.0 or higher.

=== Platforms

* Debian
* Ubuntu
* Centos
* Redhat

== Recipes

=== default

Runs the recipes +upgrade_pear+, +install_console_table+ and then installs Drush using the recipe specified in <tt>node['drush']['install_method']</tt>, which defaults to +pear+.

=== pear

Installs drush using the {PEAR package manager}[http://pear.php.net/].

It will install the version of Drush specified in <tt>node['drush']['version']</tt>, which defaults to the most recent stable version. The list of available versions is retrieved from the URL specified in <tt>node['drush']['allreleases']</tt>.

=== git

Install drush by cloning a copy of Drush from it's {source repository}[https://github.com/drush-ops/drush].

Drush will be installed to <tt>node['drush']['install_dir']</tt> which defaults to <tt>/usr/share/php/drush</tt>. It will attempt to retrieve the branch, tag or commit specified in <tt>node['drush']['version']</tt>.

=== upgrade_pear

Upgrades PEAR to version 1.9.1, which is the minimum required by Drush.

=== install_console_table

Installs {Console_Table}[http://pear.php.net/package/Console_Table], which is required by Drush.

=== make

If you are running Drush version 4 or older and you want to use {drush_make}[https://drupal.org/project/drush_make], this recipe will install it for you.

It will install the version of +drush_make+ specified in <tt>node['drush']['make']['version']</tt> which defaults to 2.3.

If the <tt>drush make</tt> command is already available, this recipe will not be run.

== Attributes

=== install_method

This attribute is used in the <tt>drush::default</tt> recipe only and specifies whether to install Drush using PEAR (+pear+) or by cloning from source (+git+). Defaults to +pear+.

=== install_dir

This attribute is used in the <tt>drush::git</tt> recipe and specifies where Drush should be installed to. Defaults to <tt>/usr/share/php/drush</tt>.

=== version

In the <tt>drush::pear</tt> recipe, this specifies which version of Drush to install.

In the <tt>drush::git</tt> recipe, this specifies which branch, tag or commit to check out.

Defaults to +stable+.

=== allreleases

This attribute is used in the in the <tt>drush::pear</tt> recipe and specifies where to get a list of available Drush releases. Defaults to <tt>http://pear.drush.org/rest/r/drush/allreleases.xml</tt>.

=== make

This attribute is used in the <tt>drush::make</tt> recipe.

* <tt>node['drush']['make']['version']</tt> - Specifies the version of Drush Make to install. Defaults to +2.3+.

== Installation

=== Using Berkshelf

Include the following line in your Berksfile:

    cookbook 'drush', github: 'msonnabaum/chef-drush'

=== Using Librarian-Chef

Include the following code in your Cheffile

    cookbook 'drush',
      :github => "msonnabaum/chef-drush",

=== As a Git Submodule

Run the following at a terminal:

    cd chef-repo
    git submodule add git://github.com/msonnabaum/chef-drush.git cookbooks/drush
    git submodule init && git submodule update
